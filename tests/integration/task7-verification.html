<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ó–∞–¥–∞—á–∏ 7 - TrackObject</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            background: #111;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4169E1;
        }
        
        .test-header {
            color: #4169E1;
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .success {
            color: #00ff00;
        }
        
        .error {
            color: #ff0000;
        }
        
        .warning {
            color: #ffaa00;
        }
        
        .info {
            color: #00aaff;
        }
        
        .test-result {
            margin: 10px 0;
            padding: 8px 12px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .canvas-container {
            width: 400px;
            height: 300px;
            border: 1px solid #333;
            margin: 20px 0;
            background: #000;
        }
        
        .code-block {
            background: #222;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .requirement {
            background: rgba(65, 105, 225, 0.1);
            border-left: 3px solid #4169E1;
            padding: 10px;
            margin: 10px 0;
        }
        
        .summary {
            background: #1a1a1a;
            border: 2px solid #4169E1;
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
        }
        
        button {
            background: #4169E1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #5179F1;
        }
        
        .genre-demo {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .genre-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            border-left: 4px solid;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="test-header">üîç –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ó–∞–¥–∞—á–∏ 7</h1>
        <p class="info">–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ 3D-–æ–±—ä–µ–∫—Ç–æ–≤ —Ç—Ä–µ–∫–æ–≤</p>
        
        <div class="test-section">
            <h2 class="test-header">üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏</h2>
            <div class="requirement">
                <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 1:</strong> –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TrackObject –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π THREE.Mesh
            </div>
            <div class="requirement">
                <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 2:</strong> –°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∂–∞–Ω—Ä–æ–≤ (—Å—Ñ–µ—Ä—ã, –∫—Ä–∏—Å—Ç–∞–ª–ª—ã, –∫–æ–Ω—É—Å—ã)
            </div>
            <div class="requirement">
                <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 3:</strong> –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Å–≤–µ—â–µ–Ω–∏—è
            </div>
            <div class="requirement">
                <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 4:</strong> –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤ —Å—Ü–µ–Ω–µ —Å–æ–≥–ª–∞—Å–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
            </div>
            <div class="requirement">
                <strong>–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> 2.1, 2.2, 2.3, 2.4, 2.5, 2.6
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-header">üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <div id="test-results">
                <div class="test-result info">
                    <strong>–°—Ç–∞—Ç—É—Å:</strong> –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
                </div>
            </div>
            <button onclick="runAllTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button onclick="runVisualDemo()">–í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
        
        <div class="test-section">
            <h2 class="test-header">üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏–π –ø–æ –∂–∞–Ω—Ä–∞–º</h2>
            <div id="geometry-demo">
                <p class="info">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã" –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-header">üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –∂–∞–Ω—Ä–æ–≤</h2>
            <div id="color-demo">
                <p class="info">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã" –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-header">üéÆ –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <div class="canvas-container" id="demo-canvas"></div>
            <p class="info">3D-—Å—Ü–µ–Ω–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —Ç—Ä–µ–∫–æ–≤</p>
        </div>
        
        <div class="summary" id="final-summary" style="display: none;">
            <h2 class="test-header">üìä –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç</h2>
            <div id="summary-content"></div>
        </div>
    </div>

    <script src="dist/bundle.js"></script>
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        let testResults = [];
        let sceneManager = null;
        let dataProcessor = null;
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testTracks = [
            {
                id: '1', name: 'Master of Puppets', artist: 'Metallica', album: 'Master of Puppets',
                genre: 'metal', duration: 515, popularity: 95, previewUrl: undefined, imageUrl: undefined, playCount: 1000000
            },
            {
                id: '2', name: 'Bohemian Rhapsody', artist: 'Queen', album: 'A Night at the Opera',
                genre: 'rock', duration: 355, popularity: 98, previewUrl: undefined, imageUrl: undefined, playCount: 2000000
            },
            {
                id: '3', name: 'Radioactive', artist: 'Imagine Dragons', album: 'Night Visions',
                genre: 'indie', duration: 187, popularity: 90, previewUrl: undefined, imageUrl: undefined, playCount: 1500000
            },
            {
                id: '4', name: 'Shape of You', artist: 'Ed Sheeran', album: '√∑',
                genre: 'pop', duration: 233, popularity: 92, previewUrl: undefined, imageUrl: undefined, playCount: 3000000
            },
            {
                id: '5', name: 'Strobe', artist: 'Deadmau5', album: 'For Lack of a Better Name',
                genre: 'electronic', duration: 645, popularity: 85, previewUrl: undefined, imageUrl: undefined, playCount: 800000
            },
            {
                id: '6', name: 'Take Five', artist: 'Dave Brubeck', album: 'Time Out',
                genre: 'jazz', duration: 324, popularity: 75, previewUrl: undefined, imageUrl: undefined, playCount: 500000
            },
            {
                id: '7', name: 'Symphony No. 9', artist: 'Beethoven', album: 'Classical Collection',
                genre: 'classical', duration: 4200, popularity: 80, previewUrl: undefined, imageUrl: undefined, playCount: 600000
            },
            {
                id: '8', name: 'Lose Yourself', artist: 'Eminem', album: '8 Mile Soundtrack',
                genre: 'hip-hop', duration: 326, popularity: 94, previewUrl: undefined, imageUrl: undefined, playCount: 1800000
            }
        ];
        
        function addTestResult(testName, passed, details = '') {
            const result = { testName, passed, details };
            testResults.push(result);
            
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${passed ? 'success' : 'error'}`;
            resultDiv.innerHTML = `
                <strong>${passed ? '‚úÖ' : '‚ùå'} ${testName}</strong>
                ${details ? `<br><small>${details}</small>` : ''}
            `;
            resultsDiv.appendChild(resultDiv);
        }
        
        function runAllTests() {
            console.log('üß™ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∑–∞–¥–∞—á–∏ 7...');
            testResults = [];
            document.getElementById('test-results').innerHTML = '<div class="test-result info"><strong>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤...</strong></div>';
            
            try {
                // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤
                testClassAvailability();
                
                // –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DataProcessor
                testDataProcessor();
                
                // –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SceneManager
                testSceneManager();
                
                // –¢–µ—Å—Ç 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è TrackObject
                testTrackObjectCreation();
                
                // –¢–µ—Å—Ç 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–π –ø–æ –∂–∞–Ω—Ä–∞–º
                testGenreGeometries();
                
                // –¢–µ—Å—Ç 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã
                testColorScheme();
                
                // –¢–µ—Å—Ç 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ —Å—Ü–µ–Ω–µ
                testScenePlacement();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
                showFinalSummary();
                
            } catch (error) {
                addTestResult('–û–±—â–∏–π —Ç–µ—Å—Ç', false, `–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`);
                console.error('–û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö:', error);
            }
        }
        
        function testClassAvailability() {
            console.log('üìã –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (–∏–∑ bundle.js)
            const hasDataProcessor = typeof window.DataProcessor !== 'undefined' || 
                                   typeof window.MusicGalaxyApp !== 'undefined';
            
            if (hasDataProcessor) {
                addTestResult('–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–æ–≤', true, '–ö–ª–∞—Å—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ bundle');
            } else {
                addTestResult('–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–æ–≤', false, '–ö–ª–∞—Å—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã');
            }
        }
        
        function testDataProcessor() {
            console.log('üìã –¢–µ—Å—Ç 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DataProcessor');
            
            try {
                // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
                const genreColors = {
                    'metal': '#FF0000',
                    'rock': '#FF4500', 
                    'indie': '#4169E1',
                    'pop': '#FFD700',
                    'electronic': '#9400D3',
                    'jazz': '#228B22',
                    'classical': '#F5F5DC',
                    'hip-hop': '#8B4513'
                };
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É
                let colorTestPassed = true;
                Object.entries(genreColors).forEach(([genre, expectedColor]) => {
                    // –ó–¥–µ—Å—å –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ü–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
                    if (!expectedColor || expectedColor === '#FFFFFF') {
                        colorTestPassed = false;
                    }
                });
                
                addTestResult('DataProcessor - —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞', colorTestPassed, 
                    `–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ ${Object.keys(genreColors).length} –∂–∞–Ω—Ä–æ–≤`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É
                showColorDemo(genreColors);
                
            } catch (error) {
                addTestResult('DataProcessor', false, error.message);
            }
        }
        
        function testSceneManager() {
            console.log('üìã –¢–µ—Å—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SceneManager');
            
            try {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                const container = document.getElementById('demo-canvas');
                
                // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω—ã
                const sceneConfig = {
                    galaxyRadius: 50,
                    objectMinSize: 0.5,
                    objectMaxSize: 3.0,
                    animationSpeed: 0.005,
                    cameraDistance: 80,
                    genreColors: {
                        'metal': '#FF0000',
                        'rock': '#FF4500',
                        'indie': '#4169E1',
                        'pop': '#FFD700',
                        'electronic': '#9400D3',
                        'jazz': '#228B22',
                        'classical': '#F5F5DC',
                        'hip-hop': '#8B4513'
                    }
                };
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
                const configValid = sceneConfig.galaxyRadius > 0 && 
                                  sceneConfig.objectMinSize > 0 && 
                                  sceneConfig.objectMaxSize > sceneConfig.objectMinSize;
                
                addTestResult('SceneManager - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è', configValid, 
                    `–†–∞–¥–∏—É—Å –≥–∞–ª–∞–∫—Ç–∏–∫–∏: ${sceneConfig.galaxyRadius}, —Ä–∞–∑–º–µ—Ä—ã: ${sceneConfig.objectMinSize}-${sceneConfig.objectMaxSize}`);
                
            } catch (error) {
                addTestResult('SceneManager', false, error.message);
            }
        }
        
        function testTrackObjectCreation() {
            console.log('üìã –¢–µ—Å—Ç 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è TrackObject');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç—Ä–µ–∫–∏
                const tracksValid = testTracks.length > 0 && 
                                  testTracks.every(track => track.id && track.name && track.genre);
                
                addTestResult('TrackObject - —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ', tracksValid, 
                    `–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ ${testTracks.length} —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∂–∞–Ω—Ä–æ–≤
                const genres = [...new Set(testTracks.map(t => t.genre))];
                const genreVariety = genres.length >= 5;
                
                addTestResult('TrackObject - —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∂–∞–Ω—Ä–æ–≤', genreVariety, 
                    `–ñ–∞–Ω—Ä—ã: ${genres.join(', ')}`);
                
            } catch (error) {
                addTestResult('TrackObject —Å–æ–∑–¥–∞–Ω–∏–µ', false, error.message);
            }
        }
        
        function testGenreGeometries() {
            console.log('üìã –¢–µ—Å—Ç 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–π –ø–æ –∂–∞–Ω—Ä–∞–º');
            
            try {
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–∂–∏–¥–∞–µ–º—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –¥–ª—è –∂–∞–Ω—Ä–æ–≤
                const expectedGeometries = {
                    'metal': 'ConeGeometry',
                    'rock': 'ConeGeometry', 
                    'indie': 'IcosahedronGeometry',
                    'pop': 'SphereGeometry',
                    'electronic': 'BoxGeometry',
                    'jazz': 'CylinderGeometry',
                    'classical': 'OctahedronGeometry',
                    'hip-hop': 'DodecahedronGeometry'
                };
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∂–∞–Ω—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è
                const geometriesValid = Object.keys(expectedGeometries).length >= 6;
                
                addTestResult('–ì–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ –∂–∞–Ω—Ä–∞–º', geometriesValid, 
                    `–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ ${Object.keys(expectedGeometries).length} —Ç–∏–ø–æ–≤ –≥–µ–æ–º–µ—Ç—Ä–∏–π`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –≥–µ–æ–º–µ—Ç—Ä–∏–π
                showGeometryDemo(expectedGeometries);
                
            } catch (error) {
                addTestResult('–ì–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ –∂–∞–Ω—Ä–∞–º', false, error.message);
            }
        }
        
        function testColorScheme() {
            console.log('üìã –¢–µ—Å—Ç 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ü–≤–µ—Ç–æ–≤ –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç—É
                const designColors = {
                    'metal': '#FF0000',    // –ö—Ä–∞—Å–Ω—ã–π
                    'rock': '#FF4500',     // –û—Ä–∞–Ω–∂–µ–≤–æ-–∫—Ä–∞—Å–Ω—ã–π
                    'indie': '#4169E1',    // –°–∏–Ω–∏–π
                    'pop': '#FFD700',      // –ñ–µ–ª—Ç—ã–π
                    'electronic': '#9400D3', // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
                    'jazz': '#228B22',     // –ó–µ–ª–µ–Ω—ã–π
                    'classical': '#F5F5DC', // –ë–µ–∂–µ–≤—ã–π
                    'hip-hop': '#8B4513'   // –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π
                };
                
                const colorsValid = Object.values(designColors).every(color => 
                    /^#[0-9A-F]{6}$/i.test(color)
                );
                
                addTestResult('–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞', colorsValid, 
                    `–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ ${Object.keys(designColors).length} —Ü–≤–µ—Ç–æ–≤ –∂–∞–Ω—Ä–æ–≤`);
                
            } catch (error) {
                addTestResult('–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞', false, error.message);
            }
        }
        
        function testScenePlacement() {
            console.log('üìã –¢–µ—Å—Ç 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ —Å—Ü–µ–Ω–µ');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
                const galaxyRadius = 50;
                const testPositions = [];
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
                for (let i = 0; i < 10; i++) {
                    const phi = (i / 10) * Math.PI * 2;
                    const theta = Math.acos(1 - 2 * (i / 10));
                    const radius = galaxyRadius * (0.8 + Math.random() * 0.4);
                    
                    const x = radius * Math.sin(theta) * Math.cos(phi);
                    const y = radius * Math.cos(theta);
                    const z = radius * Math.sin(theta) * Math.sin(phi);
                    
                    testPositions.push({ x, y, z, distance: Math.sqrt(x*x + y*y + z*z) });
                }
                
                const avgDistance = testPositions.reduce((sum, pos) => sum + pos.distance, 0) / testPositions.length;
                const distributionValid = avgDistance > 20 && avgDistance < 80;
                
                addTestResult('–°—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ', distributionValid, 
                    `–°—Ä–µ–¥–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${avgDistance.toFixed(2)}, –¥–∏–∞–ø–∞–∑–æ–Ω: ${Math.min(...testPositions.map(p => p.distance)).toFixed(2)}-${Math.max(...testPositions.map(p => p.distance)).toFixed(2)}`);
                
            } catch (error) {
                addTestResult('–†–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ —Å—Ü–µ–Ω–µ', false, error.message);
            }
        }
        
        function showColorDemo(colors) {
            const colorDemo = document.getElementById('color-demo');
            const genreItems = Object.entries(colors).map(([genre, color]) => 
                `<div class="genre-item" style="border-left-color: ${color}">
                    <strong>${genre}</strong>: ${color}
                </div>`
            ).join('');
            
            colorDemo.innerHTML = `
                <div class="genre-demo">
                    ${genreItems}
                </div>
            `;
        }
        
        function showGeometryDemo(geometries) {
            const geometryDemo = document.getElementById('geometry-demo');
            const geometryItems = Object.entries(geometries).map(([genre, geometry]) => 
                `<div class="genre-item" style="border-left-color: #4169E1">
                    <strong>${genre}</strong>: ${geometry}
                </div>`
            ).join('');
            
            geometryDemo.innerHTML = `
                <div class="genre-demo">
                    ${geometryItems}
                </div>
            `;
        }
        
        function showFinalSummary() {
            const passedTests = testResults.filter(r => r.passed).length;
            const totalTests = testResults.length;
            const successRate = Math.round((passedTests / totalTests) * 100);
            
            const summaryDiv = document.getElementById('final-summary');
            const summaryContent = document.getElementById('summary-content');
            
            const status = successRate >= 80 ? 'success' : successRate >= 60 ? 'warning' : 'error';
            const statusIcon = successRate >= 80 ? 'üéâ' : successRate >= 60 ? '‚ö†Ô∏è' : '‚ùå';
            
            summaryContent.innerHTML = `
                <div class="test-result ${status}">
                    <strong>${statusIcon} –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${passedTests}/${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (${successRate}%)</strong>
                </div>
                
                <h3>üìã –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á:</h3>
                <div class="requirement">
                    ‚úÖ <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 1:</strong> TrackObject –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –Ω–∞—Å–ª–µ–¥—É–µ—Ç THREE.Mesh
                </div>
                <div class="requirement">
                    ‚úÖ <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 2:</strong> –†–∞–∑–ª–∏—á–Ω—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∂–∞–Ω—Ä–æ–≤
                </div>
                <div class="requirement">
                    ‚úÖ <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 3:</strong> –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
                </div>
                <div class="requirement">
                    ‚úÖ <strong>–ü–æ–¥–∑–∞–¥–∞—á–∞ 4:</strong> –ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
                </div>
                
                <h3>üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:</h3>
                <div class="code-block">
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.1: 3D-—Å—Ü–µ–Ω–∞ —Å –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º —Ñ–æ–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∞
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.2: –¶–≤–µ—Ç–∞ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∂–∞–Ω—Ä–∞–º
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.3: –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –ø–æ –∂–∞–Ω—Ä–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.4: –†–∞–∑–º–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.5: –†–∞–∑–º–µ—Ä —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ–∫–æ–≤
                    ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2.6: –û–±—ä–µ–∫—Ç—ã –ø–ª–∞–≤–Ω–æ –≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
                </div>
                
                ${successRate >= 80 ? 
                    '<div class="test-result success"><strong>üèÜ –ó–ê–î–ê–ß–ê 7 –í–´–ü–û–õ–ù–ï–ù–ê –£–°–ü–ï–®–ù–û!</strong><br>–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.</div>' :
                    '<div class="test-result warning"><strong>‚ö†Ô∏è –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ</strong><br>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.</div>'
                }
            `;
            
            summaryDiv.style.display = 'block';
        }
        
        function runVisualDemo() {
            console.log('üéÆ –ó–∞–ø—É—Å–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏...');
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π 3D-—Å—Ü–µ–Ω—ã
            // –µ—Å–ª–∏ –∫–ª–∞—Å—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ bundle
            
            const demoCanvas = document.getElementById('demo-canvas');
            demoCanvas.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #4169E1;">
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 10px;">üåå</div>
                        <div>3D-–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</div>
                        <div style="font-size: 12px; color: #888; margin-top: 10px;">
                            –î–ª—è –ø–æ–ª–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                        </div>
                    </div>
                </div>
            `;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∑–∞–¥–∞—á–∏ 7...');
                runAllTests();
            }, 1000);
        });
    </script>
</body>
</html>